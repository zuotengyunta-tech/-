from pytube import Playlist

playlist_url = "https://www.youtube.com/playlist?list=PLExT6MVBKs2CzmEcSCpaSQP_u7XONu6kD"

pl = Playlist(playlist_url)
pl._video_regex = r"\"url\":\"(/watch\?v=[\w-]*)"   # ← 必須修正ポイント

items = []
for url in pl.video_urls:
    items.append(f'<li><a href="https://www.youtube.com{url}" target="_blank">{url}</a></li>')

html = f"""<!DOCTYPE html>
<html lang="ja">
<head><meta charset="utf-8"><title>再生リストビュー（高速）</title></head>
<body>
  <h1>再生リスト</h1>
  <ul>
  {'\n  '.join(items)}
  </ul>
</body>
</html>
"""

with open("playlist.html", "w", encoding="utf-8") as f:
    f.write(html)

print("playlist.html を生成しました（高速版）。")
